<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NECHOMS</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/uikit.min.css">

    <link rel="stylesheet" href="css/uikit-rtl.min.css">

</head>

<body>
    <center>
        <div class="uk-card uk-card-body uk-card-default uk-padding uk-width-1-2@m">
            <form action="">
                <fieldset class="uk-fieldset">
                    <legend class="uk-legend">Sign In</legend>
                    <fieldset class="uk-fieldset  uk-padding"><label for="phone">Phone Number</label>
                        <input id="phone" class="uk-input uk-form-width-medium" type="text"
                            placeholder="Enter Phone number"></fieldset>
                    <fieldset class="uk-fieldset  uk-padding"><label for="captcha">Captcha Verification</label>
                        <div id="captcha"></div>
                    </fieldset>
                    <button class="uk-button uk-button-primary" id="signin">Get OTP</button>
                </fieldset>

            </form>
        </div>
    </center>

    <!-- Script section -->
    <script src="./js/jquery-3.5.1.min.js"></script>
    <script src="js/uikit.min.js"></script>
    <script src="js/uikit-icons.min.js"></script>
    <script src="./js/jquery-3.5.1.min.js"></script>
    <script src="./js/tilt.jquery.min.js"></script>
    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.14.5/firebase-app.js"></script>

    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/7.14.5/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.5/firebase-firestore.js"></script>

    <!-- firebase configurations -->
    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyBfw8psG4Wz7YefnHtSzR4Y76fDx7HTR5E",
            authDomain: "necleavepermissionsystem.firebaseapp.com",
            databaseURL: "https://necleavepermissionsystem.firebaseio.com",
            projectId: "necleavepermissionsystem",
            storageBucket: "necleavepermissionsystem.appspot.com",
            messagingSenderId: "1021369373401",
            appId: "1:1021369373401:web:27ad7c5066671221da24c8",
            measurementId: "G-NQWBS0HYS0"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('captcha');
        recaptchaVerifier.render().then(function (widgetId) {
            window.recaptchaWidgetId = widgetId;
        });
        $('#signin').click(function (event) {
            event.preventDefault();
            let phone = '+91 ' + document.querySelector('#phone').value;
            let appVerifier = window.recaptchaVerifier;
            firebase.auth().useDeviceLanguage();
            // console.log(document.querySelector('#phone').value);
            firebase.auth().signInWithPhoneNumber(phone, appVerifier)
                .then(function (confirmationResult) {
                    // console.log(confirmationResult);
                    
                    window.confirmationResult = confirmationResult;
                }).catch(function (error) {
                    alert(error);
                });
        });


    </script>

</body>

</html>